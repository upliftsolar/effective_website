!!!
%html{lang: 'en'}
  %head
    %meta{charset: 'utf-8'}
    %meta{name: 'viewport', content: 'width=device-width, initial-scale=1, shrink-to-fit=no'}
    %meta{name: 'robots', content: 'index, follow'}

    = csrf_meta_tags

    = stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload'
    = javascript_include_tag 'application', 'data-turbolinks-track': 'reload'
    - if ENV["WEBSITE_STYLESHEET"]
      = stylesheet_link_tag ENV['WEBSITE_STYLESHEET'], media: 'all', 'data-turbolinks-track': 'reload'
 

    = effective_posts_header_tags
    = effective_pages_header_tags
    = effective_regions_include_tags
    - if ENV['FAVICON_ADMIN'] && request.path[/api|admin/]
      -# crazy condition is an artifact of a specific usecase, where QA needs to keep a bunch of windows open
      = favicon_link_tag asset_path(ENV['FAVICON_ADMIN'])
    - elsif ENV['FAVICON']
      = favicon_link_tag asset_path(ENV['FAVICON'])

  %body{class: effective_pages_body_classes}
    = render partial: 'layouts/impersonate'
    = render partial: 'layouts/staging'
    = render partial: 'layouts/navbar'

    #content-wrap
      .container
        = render partial: 'layouts/alert'

        - if content_for?(:sidebar)
          .row
            .col-3#sidebar= yield :sidebar
            .col-9#main= yield
        - else
          #main= yield

    #footer-wrap
      = render partial: 'layouts/footer'

