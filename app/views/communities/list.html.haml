- resource = (@_effective_resource || Effective::Resource.new(controller_path))

.row
  .col-12
    = effective_region :list_instruction do
      This is an editable description.
  %script
    function loadMarkersOnMap(){
    //this function might be called by maps init function
    var image = 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png';
    - for community in @communities.select(&:lat)
      var marker#{community.id} = new google.maps.Marker({ position: {"lat": #{community.lat}, "lng":#{community.lng}},  map: map, image: image, title: '#{community.name + " (#{community.users.length})"}' }); 
      marker#{community.id}.addListener("click", function(){ map.setZoom(11); map.setCenter(marker#{community.id}.getPosition()); });
    }

-if params[:debugging]
  - if @datatable
    = render_datatable(@datatable)
  - elsif instance_variable_get('@' + resource.plural_name).respond_to?(:to_partial_path)
    = render instance_variable_get('@' + resource.plural_name)
  - elsif instance_variable_get('@' + resource.name).respond_to?(:to_partial_path)
    = render instance_variable_get('@' + resource.name)

- elsif Rails.env.development?
  %p This list is disabled, for now. Try /?debugging=true
